<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CMS</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/quill@2.0.0/dist/quill.snow.css">
</head>
<body>
    <header id="site-header" style="display:none;"></header>
    <div style="display:flex;">
        <aside id="admin-sidebar" style="display:none;"></aside>
        <main id="main-content" style="flex:1;width:100%;"></main>
    </div>
    <footer id="site-footer" style="display:none;"></footer>
    
    <script type="module">        
        const firebaseConfig = {
            apiKey: "AIzaSyCFoK7-aeVSs1bjk92lO20FUbDugYluc08",
            authDomain: "demo2-34a32.firebaseapp.com",
            projectId: "demo2-34a32",
            storageBucket: "demo2-34a32.firebasestorage.app",
            messagingSenderId: "439475239524",
            appId: "1:439475239524:web:618bf84f80f5ae5515fd71"
        };
        // Importa i moduli di Firebase
        const { initializeApp } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js');
        const { getAuth, connectAuthEmulator } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js');
        const { getFirestore, connectFirestoreEmulator } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js');
        const { getFunctions, connectFunctionsEmulator } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-functions.js');
        const { getStorage, connectStorageEmulator } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js');

        const app = initializeApp(firebaseConfig);
        window.auth = getAuth(app);
        window.db = getFirestore(app);
        window.functions = getFunctions(app, 'europe-west1');
        window.storage = getStorage(app);
        
        if (location.hostname === 'localhost') {
            console.log("ðŸ”Œ Connessione agli emulatori Firebase...");
            connectAuthEmulator(window.auth, 'http://localhost:9099', { disableWarnings: true });
            connectFirestoreEmulator(window.db, 'localhost', 8080);
            connectFunctionsEmulator(window.functions, 'localhost', 5001);
            connectStorageEmulator(window.storage, 'localhost', 9299);
            console.log("âœ… Connesso agli emulatori.");
        }

        // Carica il router
        await import('/js/router.js');
    </script>
    <script src="https://cdn.jsdelivr.net/npm/quill@2.0.0/dist/quill.js"></script>
</body>
</html>
